%%Identification
%%The package identifies itself and the LaTeX version needed
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{examplepackage}[2014/08/21 Example package]

%%Requeiried packages and preliminary definitions, needed by the options
\RequirePackage{imakeidx}
\RequirePackage{xstring}
\RequirePackage{xcolor}
\RequirePackage{amsfonts}
\definecolor{greycolour}{HTML}{525252}
\definecolor{sharelatexcolour}{HTML}{882B21}
\definecolor{mybluecolour}{HTML}{394773}

\newcommand{\wordcolour}{greycolour}

\newcommand{\diff}{\mathrm{\mathstrut d}}
% \newcommand{\diff}{ \mathop{\mathrm{\mathstrut d}}}
\newcommand*\dif{\mathop{}\!\textnormal{\slshape d}}

\newcommand*\ind{\scalebox{1.3}{$\mathds{1}$}}
\newcommand*\gS{\mathfrak{S}}
\newcommand*\gA{\mathfrak{A}}
\newcommand\pro{\mathbb{P}}
\newcommand\CR{\color{red}}
\newcommand\C{\mathbb{C}}
\newcommand\eps{\varepsilon}


%%This parts handles the options passed to the package.
\DeclareOption{red}{\renewcommand{\wordcolour}{sharelatexcolour}}
\DeclareOption{blue}{\renewcommand{\wordcolour}{mybluecolour}}
\DeclareOption*{\PackageWarning{examplepackage}{Unknown ‘\CurrentOption’}}
\ProcessOptions\relax

%%Body of the package, most of the declarations appear here.

%%Numbered environment
\newcounter{exampleresc}[section]
\newenvironment{exampleresc}[1][]{\refstepcounter{exampleresc}\par\medskip
\noindent \textbf{Exemple~\theexampleresc. #1} \rmfamily}{\medskip}



%%Important words are added to the index and printed in different colour
\newcommand{\important}[1]
{\IfSubStr{#1}{!}
    {\textcolor{\wordcolour}{\textbf{\StrBefore{#1}{!}~\StrBehind{#1}{!}}}\index{#1}}
    {\textcolor{\wordcolour}{\textbf{#1}}\index{#1}\kern-1pt}
}